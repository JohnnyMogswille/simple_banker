"use strict";(self["webpackChunksimple_banker"]=self["webpackChunksimple_banker"]||[]).push([[431],{1431:function(t,e,r){r.r(e),r.d(e,{default:function(){return ot}});var l=r(6768);function a(t,e,r,a,o,n){const u=(0,l.g2)("dealTable"),d=(0,l.g2)("app-page"),s=(0,l.g2)("deal-modal"),c=(0,l.g2)("app-modal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(d,{title:"Сделки"},{header:(0,l.k6)((()=>[(0,l.Lk)("button",{class:"btn primary",onClick:e[0]||(e[0]=t=>a.modal=!0)},"Создать")])),default:(0,l.k6)((()=>[(0,l.bF)(u,{deals:[]})])),_:1}),((0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[a.modal?((0,l.uX)(),(0,l.Wv)(c,{key:0,modalTitle:"Добавить сделку",onClose:e[2]||(e[2]=t=>a.modal=!1)},{default:(0,l.k6)((()=>[(0,l.bF)(s,{onCreateDeal:e[1]||(e[1]=t=>a.modal=!1)})])),_:1})):(0,l.Q3)("",!0)]))],64)}var o=r(144),n=r(4232);const u={class:"card"},d={class:"card-title"};function s(t,e,r,a,o,s){return(0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("h1",d,[(0,l.eW)((0,n.v_)(r.title)+" ",1),(0,l.RG)(t.$slots,"header")]),(0,l.RG)(t.$slots,"default")])}var c={props:{title:{type:String,required:!0}},setup(t){document.title="Умный банкир | "+t.title}},i=r(1241);const k=(0,i.A)(c,[["render",s]]);var m=k;const p={key:0,class:"text-center"},L={key:1,class:"table"},b=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"№"),(0,l.Lk)("th",null,"Контрагент"),(0,l.Lk)("th",null,"Наименование"),(0,l.Lk)("th",null,"Сумма, руб"),(0,l.Lk)("th",null,"Дата покупки"),(0,l.Lk)("th",null,"Статус"),(0,l.Lk)("th",null,"Действия")])],-1),v=(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("td"),(0,l.Lk)("td"),(0,l.Lk)("td"),(0,l.Lk)("td"),(0,l.Lk)("td"),(0,l.Lk)("td"),(0,l.Lk)("td")])],-1),f=[b,v];function h(t,e,r,a,o,n){return 0===r.deals.length?((0,l.uX)(),(0,l.CE)("h4",p,"Сделок нет")):((0,l.uX)(),(0,l.CE)("table",L,f))}var E={props:["deals"]};const B=(0,i.A)(E,[["render",h]]);var y=B;const g={class:"modal"};function C(t,e,r,a,o,u){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",{class:"modal-backdrop",onClick:e[0]||(e[0]=e=>t.$emit("close"))}),(0,l.Lk)("div",g,[(0,l.Lk)("h3",null,(0,n.v_)(r.modalTitle),1),(0,l.RG)(t.$slots,"default")])],64)}var X={props:{modalTitle:{type:String}},emits:["close"]};const M=(0,i.A)(X,[["render",C]]);var S=M,_=r(5130);const A={class:"form-control"},q=(0,l.Lk)("label",{for:"contractor"},"Контрагент",-1),F={key:0},Q={class:"form-control"},T=(0,l.Lk)("label",{for:"deal"},"Наименование сделки",-1),U={key:0},V={class:"form-control"},$=(0,l.Lk)("label",{for:"cost"},"Сумма сделки",-1),D={key:0},J={class:"form-control"},R=(0,l.Lk)("label",{for:"date"},"Дата сделки",-1),j={key:0},w={class:"form-control"},x=(0,l.Lk)("label",{for:"status"},"Статус",-1),G=(0,l.Lk)("option",{value:"done"},"Завершено",-1),K=(0,l.Lk)("option",{value:"canceled"},"Отменено",-1),W=(0,l.Lk)("option",{value:"active"},"Активно",-1),P=(0,l.Lk)("option",{value:"pending"},"Выполняется",-1),Y=[G,K,W,P],I=["disabled"];function N(t,e,r,a,o,u){return(0,l.uX)(),(0,l.CE)("form",{onSubmit:e[9]||(e[9]=(0,_.D$)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,l.Lk)("div",A,[q,(0,l.bo)((0,l.Lk)("input",{id:"contractor","onUpdate:modelValue":e[0]||(e[0]=e=>t.contractor=e),type:"text",onBlur:e[1]||(e[1]=(...e)=>t.contractorBlur&&t.contractorBlur(...e))},null,544),[[_.Jo,t.contractor]]),t.contractorError?((0,l.uX)(),(0,l.CE)("small",F,(0,n.v_)(t.contractorError),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Q,[T,(0,l.bo)((0,l.Lk)("input",{id:"deal","onUpdate:modelValue":e[2]||(e[2]=e=>t.deal=e),type:"text",onBlur:e[3]||(e[3]=(...e)=>t.dealBlur&&t.dealBlur(...e))},null,544),[[_.Jo,t.deal]]),t.dealError?((0,l.uX)(),(0,l.CE)("small",U,(0,n.v_)(t.dealError),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",V,[$,(0,l.bo)((0,l.Lk)("input",{id:"cost","onUpdate:modelValue":e[4]||(e[4]=e=>t.cost=e),type:"number",onBlur:e[5]||(e[5]=(...e)=>t.costBlur&&t.costBlur(...e))},null,544),[[_.Jo,t.cost]]),t.costError?((0,l.uX)(),(0,l.CE)("small",D,(0,n.v_)(t.costError),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",J,[R,(0,l.bo)((0,l.Lk)("input",{id:"date","onUpdate:modelValue":e[6]||(e[6]=e=>t.date=e),type:"date",onBlur:e[7]||(e[7]=(...e)=>t.dateBlur&&t.dateBlur(...e))},null,544),[[_.Jo,t.date]]),t.dateError?((0,l.uX)(),(0,l.CE)("small",j,(0,n.v_)(t.dateError),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",w,[x,(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[8]||(e[8]=e=>t.status=e),for:"status"},Y,512),[[_.u1,t.status]])]),(0,l.Lk)("button",{class:"btn primary",type:"submit",disabled:t.isSubmitting}," Добавить ",8,I)],32)}var z=r(782),H=r(9041),O=r(482);function Z(t){const{handleSubmit:e,isSubmitting:r}=(0,O.mN)(),{value:l,errorMessage:a,handleBlur:o}=(0,O.Mt)("contractor",H.Yj().trim().required("Пожалуйста, введите подрядчика")),{value:n,errorMessage:u,handleBlur:d}=(0,O.Mt)("deal",H.Yj().trim().required("Пожалуйста, введите наименование сделки")),{value:s,errorMessage:c,handleBlur:i}=(0,O.Mt)("cost",H.ai().required("Пожалуйста, введите сумму").min(0,"Сумма не может быть меньше 0")),{value:k,errorMessage:m,handleBlur:p}=(0,O.Mt)("date",H.p6().required("Пожалуйста, введите дату")),{value:L}=(0,O.Mt)("status"),b=e(t);return{contractor:l,contractorError:a,contractorBlur:o,deal:n,dealError:u,dealBlur:d,cost:s,costError:c,costBlur:i,date:k,dateError:m,dateBlur:p,status:L,isSubmitting:r,onSubmit:b}}var tt={emits:["createDeal"],setup(t,{emit:e}){const r=(0,z.Pj)(),l=async t=>{await r.dispatch("request/create",t),e("createDeal")};return{...Z(l)}}};const et=(0,i.A)(tt,[["render",N]]);var rt=et,lt={components:{AppPage:m,dealTable:y,AppModal:S,dealModal:rt},setup(){const t=(0,o.KR)(!1);return{modal:t}}};const at=(0,i.A)(lt,[["render",a]]);var ot=at}}]);
//# sourceMappingURL=431.f65427a1.js.map