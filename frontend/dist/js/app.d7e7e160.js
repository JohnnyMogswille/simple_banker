(function(){"use strict";var e={2531:function(e,t,n){var a=n(5130),o=n(6768);function r(e,t,n,a,r,s){return a.layout?((0,o.uX)(),(0,o.Wv)((0,o.$y)(a.layout+"Layout"),{key:0})):(0,o.Q3)("",!0)}var s=n(1387);const u={class:"container with-nav"};function i(e,t,n,a,r,s){const i=(0,o.g2)("the-navbar"),c=(0,o.g2)("app-message"),l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(i),(0,o.Lk)("div",u,[(0,o.bF)(c),(0,o.bF)(l)])],64)}const c={class:"navbar"},l=(0,o.Lk)("h3",null,"Умный банкир",-1),f={class:"navbar-menu"},p=(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"#"},"Сообщения")],-1);function m(e,t,n,r,s,u){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",c,[l,(0,o.Lk)("ul",f,[(0,o.Lk)("li",null,[(0,o.bF)(i,{to:{name:"Home"}},{default:(0,o.k6)((()=>[(0,o.eW)(" Сделки ")])),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(i,{to:{name:"Help"}},{default:(0,o.k6)((()=>[(0,o.eW)(" Помощь ")])),_:1})]),p,(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>r.logout&&r.logout(...e)),["prevent"]))},"Выход")])])])}n(4114);var d=n(782),g={setup(){const e=(0,s.rd)(),t=(0,d.Pj)();return{logout:()=>{t.commit("auth/logout"),e.push({name:"Auth"})}}}},v=n(1241);const h=(0,v.A)(g,[["render",m]]);var b=h,k=n(4232);const y={key:0,class:"alert-title"};function A(e,t,n,a,r,s){return a.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,k.C4)(["alert",a.message.type])},[a.title?((0,o.uX)(),(0,o.CE)("p",y,(0,k.v_)(a.title),1)):(0,o.Q3)("",!0),(0,o.Lk)("p",null,(0,k.v_)(a.message.value),1),(0,o.Lk)("span",{class:"alert-close",onClick:t[0]||(t[0]=(...e)=>a.close&&a.close(...e))},"×")],2)):(0,o.Q3)("",!0)}var w={setup(){const e={primary:"Успешно",danger:"Ошибка",warning:"Внимание",info:"Информация"},t=(0,d.Pj)(),n=(0,o.EW)((()=>t.state.message)),a=(0,o.EW)((()=>n.value?e[n.value.type]:null));return{message:n,title:a,close:()=>t.commit("clearMessage")}}};const E=(0,v.A)(w,[["render",A]]);var L=E,C={components:{TheNavbar:b,AppMessage:L}};const M=(0,v.A)(C,[["render",i]]);var O=M;const j={class:"container"};function _(e,t,n,a,r,s){const u=(0,o.g2)("app-message"),i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",j,[(0,o.bF)(u),(0,o.bF)(i)])}var T={components:{AppMessage:L}};const F=(0,v.A)(T,[["render",_]]);var P=F,q={components:{MainLayout:O,AuthLayout:P},setup(){const e=(0,s.lq)();return{layout:(0,o.EW)((()=>e.meta.layout))}}};const S=(0,v.A)(q,[["render",r]]);var I=S,W=n(4373),x=n(5121);const N="jwt-token";var X={namespaced:!0,state(){return{token:localStorage.getItem(N)}},getters:{token(e){return e.token},isAuthenticated(e,t){return!!t.token}},mutations:{setToken(e,t){e.token=t,localStorage.setItem(N,t)},logout(e){e.token=null,localStorage.removeItem(N)}},actions:{async login({commit:e,dispatch:t},n){const a="AIzaSyB-O_Ovclj9KQmYt7_JZpYIl-C_qCGQB8M",o=`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${a}`;try{const{data:t}=await W.A.post(o,{...n,returnSecureToken:!0});e("setToken",t.idToken),e("clearMessage",null,{root:!0})}catch(r){throw t("setMessage",{value:(0,x.A)(r.response.data.error.message),type:"danger"},{root:!0}),new Error}}}};const Q=W.A.create({baseURL:"https://simple-banker-default-rtdb.europe-west1.firebasedatabase.app/"});var H=Q,$={namespaced:!0,state(){return{requests:[]}},mutations:{setRequests(e,t){e.requests=t},addRequests(e,t){e.request.push(t)}},actions:{async create({commit:e,dispatch:t},n){try{const e=R.getters["auth/token"],{data:a}=await H.post("/requests.json?auth="+e,n);console.log(a),t("setMessage",{value:"Сделка успешна создана",type:"primary"})}catch(a){t("setMessage",{value:a.message,type:"danger"})}}}};const B=[];var R=(0,d.y$)({plugins:B,state(){return{message:null}},getters:{},mutations:{setMessage(e,t){e.message=t},clearMessage(e){e.message=null}},actions:{setMessage({commit:e},t){e("setMessage",t),setTimeout((()=>{e("clearMessage")}),5e3)}},modules:{auth:X,request:$}});const D=[{path:"/",name:"Home",component:()=>Promise.all([n.e(100),n.e(431)]).then(n.bind(n,1431)),meta:{layout:"main",auth:!0}},{path:"/help",name:"Help",component:()=>n.e(660).then(n.bind(n,2660)),meta:{layout:"main",auth:!0}},{path:"/auth",name:"Auth",component:()=>Promise.all([n.e(100),n.e(294)]).then(n.bind(n,6294)),meta:{layout:"auth",auth:!1}}],K=(0,s.aE)({history:(0,s.LA)("/"),routes:D,linkActiveClass:"active",linkExactActiveClass:"active"});K.beforeEach(((e,t,n)=>{const a=e.meta.auth;a&&R.getters["auth/isAuthenticated"]?n():a&&!R.getters["auth/isAuthenticated"]?n("/auth?message=auth"):n()}));var U=K;(0,a.Ef)(I).use(R).use(U).mount("#app")},5121:function(e,t,n){n.d(t,{A:function(){return o}});const a={EMAIL_NOT_FOUND:"Пользователь с таким email не был найден",auth:"Необходимо авторизоваться в систему"};function o(e){return console.log(e),a[e]?a[e]:"Неизвестная ошибка"}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var s=1/0;for(l=0;l<e.length;l++){a=e[l][0],o=e[l][1],r=e[l][2];for(var u=!0,i=0;i<a.length;i++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(u=!1,r<s&&(s=r));if(u){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{100:"e9a24889",294:"4b8f10fa",431:"f65427a1",660:"7933421a"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="simple_banker:";n.l=function(a,o,r,s){if(e[a])e[a].push(o);else{var u,i;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==a||f.getAttribute("data-webpack")==t+r){u=f;break}}u||(i=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+r),u.src=a),e[a]=[o];var p=function(t,n){u.onerror=u.onload=null,clearTimeout(m);var o=e[a];if(delete e[a],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),i&&document.head.appendChild(u)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={524:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=r);var s=n.p+n.u(t),u=new Error,i=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,o[1](u)}};n.l(s,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,s=a[0],u=a[1],i=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(i)var l=i(n)}for(t&&t(a);c<s.length;c++)r=s[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},a=self["webpackChunksimple_banker"]=self["webpackChunksimple_banker"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(2531)}));a=n.O(a)})();
//# sourceMappingURL=app.d7e7e160.js.map